add_executable(testZfpHeader testZfpHeader.c)
target_link_libraries(testZfpHeader cmocka zfp)
add_test(NAME testZfpHeader COMMAND testZfpHeader)

add_executable(testZfpStream testZfpStream.c)
target_link_libraries(testZfpStream cmocka zfp)
add_test(NAME testZfpStream COMMAND testZfpStream)

add_executable(testOmp testOmp.c)
target_link_libraries(testOmp cmocka zfp)
add_test(NAME testOmp COMMAND testOmp)
if(ZFP_WITH_OPENMP)
  target_compile_options(testOmp PRIVATE ${OpenMP_C_FLAGS})
  target_link_libraries(testOmp ${OpenMP_C_LIBRARIES})
  set_property(TEST testOmp PROPERTY RUN_SERIAL TRUE)
endif()
