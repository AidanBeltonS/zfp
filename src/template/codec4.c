#define index(i, j, k, l) ((i) + 4 * ((j) + 4 * ((k) + 4 * (l))))

#warning "finalize coefficient ordering"
/* order coefficients (i, j, k, l) by i + j + k + l, then i^2 + j^2 + k^2 + l^2 */
cache_align_(static const uchar perm_4[256]) = {
  index(0, 0, 0, 0), /*   0 :  0 */

  index(1, 0, 0, 0), /*   1 :  1 */
  index(0, 1, 0, 0), /*   2 :  1 */
  index(0, 0, 1, 0), /*   3 :  1 */
  index(0, 0, 0, 1), /*   4 :  1 */

/**/
  index(1, 1, 0, 0), /*     :  2 */
  index(1, 0, 1, 0), /*     :  2 */
  index(1, 0, 0, 1), /*     :  2 */
  index(0, 1, 1, 0), /*     :  2 */
  index(0, 1, 0, 1), /*     :  2 */
  index(0, 0, 1, 1), /*     :  2 */

  index(2, 0, 0, 0), /*     :  2 */
  index(0, 2, 0, 0), /*     :  2 */
  index(0, 0, 2, 0), /*     :  2 */
  index(0, 0, 0, 2), /*     :  2 */

  index(0, 1, 1, 1), /*     :  3 */
  index(1, 0, 1, 1), /*     :  3 */
  index(1, 1, 0, 1), /*     :  3 */
  index(1, 1, 1, 0), /*     :  3 */

/**/
  index(2, 1, 0, 0), /*     :  3 */
  index(2, 0, 1, 0), /*     :  3 */
  index(2, 0, 0, 1), /*     :  3 */
  index(0, 2, 1, 0), /*     :  3 */
  index(0, 2, 0, 1), /*     :  3 */
  index(1, 2, 0, 0), /*     :  3 */
  index(0, 0, 2, 1), /*     :  3 */
  index(1, 0, 2, 0), /*     :  3 */
  index(0, 1, 2, 0), /*     :  3 */
  index(1, 0, 0, 2), /*     :  3 */
  index(0, 1, 0, 2), /*     :  3 */
  index(0, 0, 1, 2), /*     :  3 */

  index(3, 0, 0, 0), /*     :  3 */
  index(0, 3, 0, 0), /*     :  3 */
  index(0, 0, 3, 0), /*     :  3 */
  index(0, 0, 0, 3), /*     :  3 */

  index(1, 1, 1, 1), /*     :  4 */

/**/
  index(0, 1, 1, 2), /*     :  4 */
  index(0, 1, 2, 1), /*     :  4 */
  index(0, 2, 1, 1), /*     :  4 */
  index(1, 0, 1, 2), /*     :  4 */
  index(1, 0, 2, 1), /*     :  4 */
  index(1, 1, 0, 2), /*     :  4 */
  index(1, 1, 2, 0), /*     :  4 */
  index(1, 2, 0, 1), /*     :  4 */
  index(1, 2, 1, 0), /*     :  4 */
  index(2, 0, 1, 1), /*     :  4 */
  index(2, 1, 0, 1), /*     :  4 */
  index(2, 1, 1, 0), /*     :  4 */

/**/
  index(0, 0, 2, 2), /*     :  4 */
  index(0, 2, 0, 2), /*     :  4 */
  index(0, 2, 2, 0), /*     :  4 */
  index(2, 0, 0, 2), /*     :  4 */
  index(2, 0, 2, 0), /*     :  4 */
  index(2, 2, 0, 0), /*     :  4 */

/**/
  index(0, 0, 1, 3), /*     :  4 */
  index(0, 0, 3, 1), /*     :  4 */
  index(0, 1, 0, 3), /*     :  4 */
  index(0, 1, 3, 0), /*     :  4 */
  index(0, 3, 0, 1), /*     :  4 */
  index(0, 3, 1, 0), /*     :  4 */
  index(1, 0, 0, 3), /*     :  4 */
  index(1, 0, 3, 0), /*     :  4 */
  index(1, 3, 0, 0), /*     :  4 */
  index(3, 0, 0, 1), /*     :  4 */
  index(3, 0, 1, 0), /*     :  4 */
  index(3, 1, 0, 0), /*     :  4 */

  index(2, 1, 1, 1), /*     :  5 */
  index(1, 2, 1, 1), /*     :  5 */
  index(1, 1, 2, 1), /*     :  5 */
  index(1, 1, 1, 2), /*     :  5 */

/**/
  index(0, 1, 2, 2), /*     :  5 */
  index(0, 2, 1, 2), /*     :  5 */
  index(0, 2, 2, 1), /*     :  5 */
  index(1, 0, 2, 2), /*     :  5 */
  index(1, 2, 0, 2), /*     :  5 */
  index(1, 2, 2, 0), /*     :  5 */
  index(2, 0, 1, 2), /*     :  5 */
  index(2, 0, 2, 1), /*     :  5 */
  index(2, 1, 0, 2), /*     :  5 */
  index(2, 1, 2, 0), /*     :  5 */
  index(2, 2, 0, 1), /*     :  5 */
  index(2, 2, 1, 0), /*     :  5 */

/**/
  index(0, 1, 1, 3), /*     :  5 */
  index(0, 1, 3, 1), /*     :  5 */
  index(0, 3, 1, 1), /*     :  5 */
  index(1, 0, 1, 3), /*     :  5 */
  index(1, 0, 3, 1), /*     :  5 */
  index(1, 1, 0, 3), /*     :  5 */
  index(1, 1, 3, 0), /*     :  5 */
  index(1, 3, 0, 1), /*     :  5 */
  index(1, 3, 1, 0), /*     :  5 */
  index(3, 0, 1, 1), /*     :  5 */
  index(3, 1, 0, 1), /*     :  5 */
  index(3, 1, 1, 0), /*     :  5 */

/**/
  index(0, 0, 2, 3), /*     :  5 */
  index(0, 0, 3, 2), /*     :  5 */
  index(0, 2, 0, 3), /*     :  5 */
  index(0, 2, 3, 0), /*     :  5 */
  index(0, 3, 0, 2), /*     :  5 */
  index(0, 3, 2, 0), /*     :  5 */
  index(2, 0, 0, 3), /*     :  5 */
  index(2, 0, 3, 0), /*     :  5 */
  index(2, 3, 0, 0), /*     :  5 */
  index(3, 0, 0, 2), /*     :  5 */
  index(3, 0, 2, 0), /*     :  5 */
  index(3, 2, 0, 0), /*     :  5 */

/**/
  index(1, 1, 2, 2), /*     :  6 */
  index(1, 2, 1, 2), /*     :  6 */
  index(1, 2, 2, 1), /*     :  6 */
  index(2, 1, 1, 2), /*     :  6 */
  index(2, 1, 2, 1), /*     :  6 */
  index(2, 2, 1, 1), /*     :  6 */

  index(0, 2, 2, 2), /*     :  6 */
  index(2, 0, 2, 2), /*     :  6 */
  index(2, 2, 0, 2), /*     :  6 */
  index(2, 2, 2, 0), /*     :  6 */

  index(3, 1, 1, 1), /*     :  6 */
  index(1, 3, 1, 1), /*     :  6 */
  index(1, 1, 3, 1), /*     :  6 */
  index(1, 1, 1, 3), /*     :  6 */

/**/
  index(0, 1, 2, 3), /*     :  6 */
  index(0, 1, 3, 2), /*     :  6 */
  index(0, 2, 1, 3), /*     :  6 */
  index(0, 2, 3, 1), /*     :  6 */
  index(0, 3, 1, 2), /*     :  6 */
  index(0, 3, 2, 1), /*     :  6 */
  index(1, 0, 2, 3), /*     :  6 */
  index(1, 0, 3, 2), /*     :  6 */
  index(1, 2, 0, 3), /*     :  6 */
  index(1, 2, 3, 0), /*     :  6 */
  index(1, 3, 0, 2), /*     :  6 */
  index(1, 3, 2, 0), /*     :  6 */
  index(2, 0, 1, 3), /*     :  6 */
  index(2, 0, 3, 1), /*     :  6 */
  index(2, 1, 0, 3), /*     :  6 */
  index(2, 1, 3, 0), /*     :  6 */
  index(2, 3, 0, 1), /*     :  6 */
  index(2, 3, 1, 0), /*     :  6 */
  index(3, 0, 1, 2), /*     :  6 */
  index(3, 0, 2, 1), /*     :  6 */
  index(3, 1, 0, 2), /*     :  6 */
  index(3, 1, 2, 0), /*     :  6 */
  index(3, 2, 0, 1), /*     :  6 */
  index(3, 2, 1, 0), /*     :  6 */

/**/
  index(0, 0, 3, 3), /*     :  6 */
  index(0, 3, 0, 3), /*     :  6 */
  index(0, 3, 3, 0), /*     :  6 */
  index(3, 0, 0, 3), /*     :  6 */
  index(3, 0, 3, 0), /*     :  6 */
  index(3, 3, 0, 0), /*     :  6 */

  index(1, 2, 2, 2), /*     :  7 */
  index(2, 1, 2, 2), /*     :  7 */
  index(2, 2, 1, 2), /*     :  7 */
  index(2, 2, 2, 1), /*     :  7 */

/**/
  index(1, 1, 2, 3), /*     :  7 */
  index(1, 1, 3, 2), /*     :  7 */
  index(1, 2, 1, 3), /*     :  7 */
  index(1, 2, 3, 1), /*     :  7 */
  index(1, 3, 1, 2), /*     :  7 */
  index(1, 3, 2, 1), /*     :  7 */
  index(2, 1, 1, 3), /*     :  7 */
  index(2, 1, 3, 1), /*     :  7 */
  index(2, 3, 1, 1), /*     :  7 */
  index(3, 1, 1, 2), /*     :  7 */
  index(3, 1, 2, 1), /*     :  7 */
  index(3, 2, 1, 1), /*     :  7 */

/**/
  index(0, 2, 2, 3), /*     :  7 */
  index(0, 2, 3, 2), /*     :  7 */
  index(0, 3, 2, 2), /*     :  7 */
  index(2, 0, 2, 3), /*     :  7 */
  index(2, 0, 3, 2), /*     :  7 */
  index(2, 2, 0, 3), /*     :  7 */
  index(2, 2, 3, 0), /*     :  7 */
  index(2, 3, 0, 2), /*     :  7 */
  index(2, 3, 2, 0), /*     :  7 */
  index(3, 0, 2, 2), /*     :  7 */
  index(3, 2, 0, 2), /*     :  7 */
  index(3, 2, 2, 0), /*     :  7 */

/**/
  index(0, 1, 3, 3), /*     :  7 */
  index(0, 3, 1, 3), /*     :  7 */
  index(0, 3, 3, 1), /*     :  7 */
  index(1, 0, 3, 3), /*     :  7 */
  index(1, 3, 0, 3), /*     :  7 */
  index(1, 3, 3, 0), /*     :  7 */
  index(3, 0, 1, 3), /*     :  7 */
  index(3, 0, 3, 1), /*     :  7 */
  index(3, 1, 0, 3), /*     :  7 */
  index(3, 1, 3, 0), /*     :  7 */
  index(3, 3, 0, 1), /*     :  7 */
  index(3, 3, 1, 0), /*     :  7 */

  index(2, 2, 2, 2), /*     :  8 */

/**/
  index(1, 2, 2, 3), /*     :  8 */
  index(1, 2, 3, 2), /*     :  8 */
  index(1, 3, 2, 2), /*     :  8 */
  index(2, 1, 2, 3), /*     :  8 */
  index(2, 1, 3, 2), /*     :  8 */
  index(2, 2, 1, 3), /*     :  8 */
  index(2, 2, 3, 1), /*     :  8 */
  index(2, 3, 1, 2), /*     :  8 */
  index(2, 3, 2, 1), /*     :  8 */
  index(3, 1, 2, 2), /*     :  8 */
  index(3, 2, 1, 2), /*     :  8 */
  index(3, 2, 2, 1), /*     :  8 */

/**/
  index(1, 1, 3, 3), /*     :  8 */
  index(1, 3, 1, 3), /*     :  8 */
  index(1, 3, 3, 1), /*     :  8 */
  index(3, 1, 1, 3), /*     :  8 */
  index(3, 1, 3, 1), /*     :  8 */
  index(3, 3, 1, 1), /*     :  8 */

/**/
  index(0, 2, 3, 3), /*     :  8 */
  index(0, 3, 2, 3), /*     :  8 */
  index(0, 3, 3, 2), /*     :  8 */
  index(2, 0, 3, 3), /*     :  8 */
  index(2, 3, 0, 3), /*     :  8 */
  index(2, 3, 3, 0), /*     :  8 */
  index(3, 0, 2, 3), /*     :  8 */
  index(3, 0, 3, 2), /*     :  8 */
  index(3, 2, 0, 3), /*     :  8 */
  index(3, 2, 3, 0), /*     :  8 */
  index(3, 3, 0, 2), /*     :  8 */
  index(3, 3, 2, 0), /*     :  8 */

  index(3, 2, 2, 2), /*     :  9 */
  index(2, 3, 2, 2), /*     :  9 */
  index(2, 2, 3, 2), /*     :  9 */
  index(2, 2, 2, 3), /*     :  9 */

/**/
  index(1, 2, 3, 3), /*     :  9 */
  index(1, 3, 2, 3), /*     :  9 */
  index(1, 3, 3, 2), /*     :  9 */
  index(2, 1, 3, 3), /*     :  9 */
  index(2, 3, 1, 3), /*     :  9 */
  index(2, 3, 3, 1), /*     :  9 */
  index(3, 1, 2, 3), /*     :  9 */
  index(3, 1, 3, 2), /*     :  9 */
  index(3, 2, 1, 3), /*     :  9 */
  index(3, 2, 3, 1), /*     :  9 */
  index(3, 3, 1, 2), /*     :  9 */
  index(3, 3, 2, 1), /*     :  9 */

  index(0, 3, 3, 3), /*     :  9 */
  index(3, 0, 3, 3), /*     :  9 */
  index(3, 3, 0, 3), /*     :  9 */
  index(3, 3, 3, 0), /*     :  9 */

/**/
  index(2, 2, 3, 3), /*     : 10 */
  index(2, 3, 2, 3), /*     : 10 */
  index(2, 3, 3, 2), /*     : 10 */
  index(3, 2, 2, 3), /*     : 10 */
  index(3, 2, 3, 2), /*     : 10 */
  index(3, 3, 2, 2), /*     : 10 */

  index(1, 3, 3, 3), /* 247 : 10 */
  index(3, 1, 3, 3), /* 248 : 10 */
  index(3, 3, 1, 3), /* 249 : 10 */
  index(3, 3, 3, 1), /* 250 : 10 */

  index(2, 3, 3, 3), /* 251 : 11 */
  index(3, 2, 3, 3), /* 252 : 11 */
  index(3, 3, 2, 3), /* 253 : 11 */
  index(3, 3, 3, 2), /* 254 : 11 */

  index(3, 3, 3, 3), /* 255 : 12 */
};

#undef index
